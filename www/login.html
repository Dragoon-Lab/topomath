<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
	<title>Topomath Demo</title>

	<link rel="stylesheet" type="text/css" href="css/login-base.css">
	<link rel="stylesheet" type="text/css" href="css/login-form.css">

	<script type="text/javascript">

	function validateForm(){
		var form = document.forms["problem-select"];
		var x = form.u.value;
		if (x==null || x==""){
			alert("Please enter a username.");
			return false;
		}      
		// If folder field is empty, remove from form.
		// Topomath treats the presence of the folder field
		// as a switch for published versus custom problems.
		if(form.f.value.trim() == ""){
		  console.log("Deleting folder (f) from GET.", form);
		  document.getElementById("folder").removeAttribute('name');
		}
		return true;
	}

	function onModeChange(selected){
		if(selected.value === "STUDENT" || selected.value === "NOFEEDBACK"){
			document.getElementById('fixposition').innerHTML='<input name="fp" type="checkbox"/>';
			document.getElementById('restartproblem').innerHTML='<input name="rp" type="checkbox"/>';
		}else{
			document.getElementById('fixposition').innerHTML='<label>N/A</label>';
			document.getElementById('restartproblem').innerHTML='<label>N/A</label>';
		}
	}

	</script>

</head>
<body>
	<!-- Removed "onbeforeunload='reset_options()'" from body tag to correct form reset problems after download-->
<div id="page-wrap">

	<div id="content">

		<form action="index.php" method="POST" id="problem-select" class="problem-selection-form" onsubmit="return validateForm()">

			<h2>Start Topomath Demo</h2>
				<div class="fieldgroup">
					<label for="username">Username: </label>
					<input id="username" type="text" name="u">
				</div>

				<div class="fieldgroup">
					<label for="mode">Mode: </label>
					<select name="m" id="mode" onchange="onModeChange(this)"">
						<option value="STUDENT" selected="true">Immediate Feedback (Student)</option>
						<option value="AUTHOR">Author</option>
						<option value="NOFEEDBACK">No Feedback</option>
						<option value="SEDITOR">Editor</option>
						<!--<option value="COACHED">Coached</option>
						<option value="TEST">Delayed Feedback (Test)</option-->
					</select>
				</div>

				<div class="fieldgroup">
					<label for="problem">Problem: </label>
					<input id="problem" type="text" name="p" value="rabbits">
				</div>

				<div class="fieldgroup">
					<label for="fixposition"> Fix Position: <br/></label>
					<div id="fixposition"><input name="fp" type="checkbox"/></div>
					<label for="restartproblem"> Restart Problem: <br/></label>
					<div id="restartproblem"><input name="rp" type="checkbox"/></div>
				</div>

				<div class="fieldgroup">
					<label for="fixposition"> Give parameter nodes: <br/></label>
					<div id="fixposition"><input name="sp" type="checkbox"/></div>
				</div>

				<div class="fieldgroup">
					<label for="fixposition"> Give DRT nodes: <br/></label>
					<div id="fixposition"><input name="ss" type="checkbox"/></div>
				</div>


				<div class="fieldgroup">
					<label for="section">Section: </label>
					<input id="section" type="text" name="s" value="login.html">
				</div>

				<div class="fieldgroup">
					<label for="folder">Folder:<br> (leave blank for published model) </label>
					<input id="folder" type="text" name="f" value="">
				</div>

				<div class="fieldgroup">
					<input type="submit" name="c" value="Continue" class="submit">
				</div>
		</form>
	</div>
</div>
</body>
</html>
